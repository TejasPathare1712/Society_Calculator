<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Society Interest Calculator</title>

    <!-- Bootstrap CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />

    <style>
      body {
        background: linear-gradient(135deg, #f5f7fa, #c3cfe2);
        font-family: "Poppins", sans-serif;
        padding-top: 40px;
      }

      .card {
        border-radius: 20px;
        box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
      }

      h2 {
        text-align: center;
        font-weight: 700;
        margin-bottom: 25px;
      }

      .result-box {
        background-color: #f8f9fa;
        border-radius: 10px;
        padding: 15px;
        margin-top: 20px;
      }

      .amount-words {
        font-size: 0.9rem;
        color: #555;
        margin-top: 5px;
        font-style: italic;
      }

      footer {
        text-align: center;
        padding: 15px;
        color: #555;
        margin-top: 30px;
      }
    </style>
  </head>

  <body>
    <div class="container">
      <div class="card p-4 mx-auto" style="max-width: 600px">
        <h2>üè¶ Society Interest Calculator</h2>
        <form id="interestForm">
          <!-- Principal Amount -->
          <div class="mb-3">
            <label for="principal" class="form-label">Principal Amount (‚Çπ)</label>
            <input
              type="number"
              class="form-control"
              id="principal"
              placeholder="Enter amount"
              required
            />
            <div id="amountWords" class="amount-words"></div>
          </div>

          <!-- Actual Disbursed Date -->
          <div class="mb-3">
            <label for="disbursedDate" class="form-label">
              Actual Disbursed Date (Loan Start Date)
            </label>
            <input
              type="date"
              class="form-control"
              id="disbursedDate"
              required
            />
          </div>

          <!-- Actual Payment Date -->
          <div class="mb-3">
            <label for="paymentDate" class="form-label">Actual Payment Date</label>
            <input type="date" class="form-control" id="paymentDate" required />
          </div>

          <button type="submit" class="btn btn-primary w-100">
            Calculate Interest
          </button>
        </form>

        <div id="result" class="result-box mt-4" style="display: none"></div>
      </div>
    </div>

    <footer>
      &copy; 2025 Society Interest Calculator | Designed for mobile & desktop
    </footer>

    <script>
      // Convert number to words (Indian numbering system)
      function numberToWords(num) {
        const ones = [
          "",
          "One",
          "Two",
          "Three",
          "Four",
          "Five",
          "Six",
          "Seven",
          "Eight",
          "Nine",
          "Ten",
          "Eleven",
          "Twelve",
          "Thirteen",
          "Fourteen",
          "Fifteen",
          "Sixteen",
          "Seventeen",
          "Eighteen",
          "Nineteen",
        ];
        const tens = [
          "",
          "",
          "Twenty",
          "Thirty",
          "Forty",
          "Fifty",
          "Sixty",
          "Seventy",
          "Eighty",
          "Ninety",
        ];

        if (num === 0) return "Zero";

        function getWords(n) {
          let str = "";

          if (n > 19) {
            str += tens[Math.floor(n / 10)] + " " + ones[n % 10];
          } else {
            str += ones[n];
          }

          return str.trim();
        }

        function convertToWords(n) {
          let output = "";

          if (n >= 10000000) {
            output += convertToWords(Math.floor(n / 10000000)) + " Crore ";
            n %= 10000000;
          }
          if (n >= 100000) {
            output += convertToWords(Math.floor(n / 100000)) + " Lakh ";
            n %= 100000;
          }
          if (n >= 1000) {
            output += convertToWords(Math.floor(n / 1000)) + " Thousand ";
            n %= 1000;
          }
          if (n >= 100) {
            output += convertToWords(Math.floor(n / 100)) + " Hundred ";
            n %= 100;
          }

          if (n > 0) output += getWords(n);

          return output.trim();
        }

        return convertToWords(num) + " Rupees Only";
      }

      // Update amount in words dynamically
      document.getElementById("principal").addEventListener("input", function () {
        const amount = parseInt(this.value);
        const wordsDiv = document.getElementById("amountWords");
        wordsDiv.textContent = amount
          ? numberToWords(amount)
          : "";
      });

      // Interest calculation logic
      document
        .getElementById("interestForm")
        .addEventListener("submit", function (event) {
          event.preventDefault();

          const principal = parseFloat(document.getElementById("principal").value);
          const disbursedDateInput = document.getElementById("disbursedDate").value;
          const paymentDateInput = document.getElementById("paymentDate").value;

          if (!disbursedDateInput || !paymentDateInput || isNaN(principal) || principal <= 0) {
            alert("Please enter valid values.");
            return;
          }

          const disbursedDate = new Date(disbursedDateInput);
          const paymentDate = new Date(paymentDateInput);
          const dueDate = new Date("2026-06-30"); // Society's due date

          const normalRate = principal <= 300000 ? 6.0 : 10.0;
          const penaltyRate = 11.0;

          let normalInterest = 0;
          let penaltyInterest = 0;

          const daysBetween = (d1, d2) => Math.floor((d2 - d1) / (1000 * 60 * 60 * 24));

          // Case 1: Paid on or before due date
          if (paymentDate <= dueDate) {
            const normalDays = daysBetween(disbursedDate, paymentDate);
            const timeInYears = normalDays / 365;
            normalInterest = (principal * normalRate * timeInYears) / 100;
          } else {
            // Case 2: Paid after due date
            const normalDays = daysBetween(disbursedDate, dueDate);
            const delayDays = daysBetween(new Date(dueDate.getTime() + 86400000), paymentDate);

            const normalTime = normalDays / 365;
            const delayTime = delayDays / 365;

            normalInterest = (principal * normalRate * normalTime) / 100;
            penaltyInterest = (principal * penaltyRate * delayTime) / 100;
          }

          const totalInterest = normalInterest + penaltyInterest;
          const totalAmount = principal + totalInterest;

          const resultDiv = document.getElementById("result");
          resultDiv.style.display = "block";
          resultDiv.innerHTML = `
            <h5>üìÖ Interest Calculation Summary</h5>
            <p><strong>Loan Start Date (Disbursed):</strong> ${disbursedDateInput}</p>
            <p><strong>Due Date:</strong> ${dueDate.toISOString().split("T")[0]}</p>
            <p><strong>Payment Date:</strong> ${paymentDateInput}</p>
            <p><strong>Principal:</strong> ‚Çπ${principal.toFixed(2)}</p>
            <p><strong>Principal (in words):</strong> ${numberToWords(principal)}</p>
            <p><strong>Normal Rate:</strong> ${normalRate}% per annum</p>
            <p><strong>Penalty Rate (after due date):</strong> ${penaltyRate}% per annum</p>
            <hr>
            <p><strong>Normal Interest:</strong> ‚Çπ${normalInterest.toFixed(2)}</p>
            <p><strong>Penalty Interest:</strong> ‚Çπ${penaltyInterest.toFixed(2)}</p>
            <p><strong>Total Interest:</strong> ‚Çπ${totalInterest.toFixed(2)}</p>
            <p><strong>Total Amount Payable:</strong> ‚Çπ${totalAmount.toFixed(2)}</p>
          `;
        });
    </script>
  </body>
</html>
